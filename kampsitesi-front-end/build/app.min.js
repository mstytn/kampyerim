"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classPrivateMethodInitSpec(obj,privateSet){_checkPrivateRedeclaration(obj,privateSet),privateSet.add(obj)}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(void 0===method){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var backendOrigin="https://kampisitesi.herokuapp.com",myHeaders=new Headers;myHeaders.append("Accept","*/*"),myHeaders.append("Content-Type","application/json"),myHeaders.append("Accept-Encoding","gzip, deflate, br");var requestOptions={method:"GET",headers:myHeaders,redirect:"follow"},UserLocation=function(){function UserLocation(){_classCallCheck(this,UserLocation),this.userLocation=void 0,this.point=[32.866287,39.925533],this.isPointGathered=!1}return _createClass(UserLocation,[{key:"requestLocation",value:function(){var _requestLocation=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){var _this=this;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",new Promise((function(res,rej){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(position){_this.point=[position.coords.longitude,position.coords.latitude],_this.isPointGathered=!0,res({type:"Point",location:[position.coords.latitude,position.coords.longitude]})}),(function(err){return rej(err)}))})));case 1:case"end":return _context.stop()}}),_callee)})));function requestLocation(){return _requestLocation.apply(this,arguments)}return requestLocation}()},{key:"getPlace",value:function(){var _getPlace=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(){var userLocation,myHeaders,reqBody,requseOptions,response,data;return _regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,this.requestLocation();case 2:return userLocation=_context2.sent,(myHeaders=new Headers).append("Accept","*/*"),myHeaders.append("Content-Type","application/json"),myHeaders.append("Accept-Encoding","gzip, deflate, br"),this.userLocation=userLocation,reqBody={loc:userLocation.location},requseOptions={method:"POST",headers:myHeaders,redirect:"follow",body:JSON.stringify(reqBody)},_context2.next=12,fetch(backendOrigin+"/geoloc",requseOptions);case 12:return response=_context2.sent,_context2.next=15,response.json();case 15:return data=_context2.sent,_context2.abrupt("return",data);case 17:case"end":return _context2.stop()}}),_callee2,this)})));function getPlace(){return _getPlace.apply(this,arguments)}return getPlace}()}]),UserLocation}(),FeaturedCaps=function(){function FeaturedCaps(featuredListQuery){_classCallCheck(this,FeaturedCaps),this.featuredList=document.querySelector(featuredListQuery),this.fCamps="",this.data=void 0}return _createClass(FeaturedCaps,[{key:"featuredCampGetter",value:function(){var _featuredCampGetter=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(){var count,data,response,_args3=arguments;return _regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:count=_args3.length>0&&void 0!==_args3[0]?_args3[0]:5,this.myHeaders=new Headers,this.myHeaders.append("Accept","*/*"),this.myHeaders.append("Content-Type","application/json"),this.myHeaders.append("Accept-Encoding","gzip, deflate, br"),this.requestOptions={method:"GET",headers:this.myHeaders,redirect:"follow"};case 6:if(data){_context3.next=18;break}return _context3.next=9,fetch(backendOrigin+"/camps/random",this.requestOptions);case 9:return response=_context3.sent,_context3.next=12,response.json();case 12:if(!(data=_context3.sent).success){_context3.next=16;break}return this.data=data.data,_context3.abrupt("return",data.data.slice(0,count));case 16:_context3.next=6;break;case 18:case"end":return _context3.stop()}}),_callee3,this)})));function featuredCampGetter(){return _featuredCampGetter.apply(this,arguments)}return featuredCampGetter}()},{key:"featuredCampCreator",value:function(){var _featuredCampCreator=_asyncToGenerator(_regeneratorRuntime().mark((function _callee4(){var _this2=this,data;return _regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,this.featuredCampGetter();case 2:return(data=_context4.sent).forEach((function(d,i){i<4&&(_this2.fCamps+='\n          <a href="camp.html?id='.concat(d._id,'" class="featured-camp" data-link="').concat(d._id,'">\n            <div class="featured-camp__img">\n              <img src="').concat(d.images[0],'" alt="').concat(d.name.toLowerCase(),'">\n              </div>\n            <img class="dummy" src="imgs/loader.gif" alt="dummy">\n            <div class="featured-camp__info">\n              <h3>').concat(d.name.toLowerCase(),'</h3>\n              <p><i class="bi bi-geo-alt-fill"></i> ').concat(d.region,"</p>\n            </div>\n          </a>\n        "))})),_context4.abrupt("return",this);case 5:case"end":return _context4.stop()}}),_callee4,this)})));function featuredCampCreator(){return _featuredCampCreator.apply(this,arguments)}return featuredCampCreator}()},{key:"displayFeatured",value:function displayFeatured(){(this.fCamps||""!==this.fCamps)&&(this.featuredList.innerHTML="",this.featuredList.insertAdjacentHTML("afterbegin",this.fCamps),this.featuredList.addEventListener("mouseover",function(){var _ref=_asyncToGenerator(_regeneratorRuntime().mark((function _callee5(e){var id,res,data,flyer;return _regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(!(id=e.target.getAttribute("data-link"))){_context5.next=9;break}return _context5.next=4,fetch(backendOrigin+"/camps/camp/"+id);case 4:return res=_context5.sent,_context5.next=7,res.json();case 7:(data=_context5.sent)&&data.success&&(flyer=data.data.location.coordinates,map&&map.flyTo({center:flyer,zoom:9,essential:!0}));case 9:case"end":return _context5.stop()}}),_callee5)})));return function(_x){return _ref.apply(this,arguments)}}()),this.featuredList.addEventListener("mouseout",(function(){map&&map.flyTo({center:uloc.point,zoom:4,essential:!0})})))}}]),FeaturedCaps}();function showMap(){return _showMap.apply(this,arguments)}function _showMap(){return(_showMap=_asyncToGenerator(_regeneratorRuntime().mark((function _callee9(){var myHeaders,requestOptions,tokenResponse,mapboxToken,map,response,cluster;return _regeneratorRuntime().wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return(myHeaders=new Headers).append("Accept","*/*"),myHeaders.append("Content-Type","application/json"),myHeaders.append("Accept-Encoding","gzip, deflate, br"),requestOptions={method:"GET",headers:myHeaders,redirect:"follow"},_context9.next=7,fetch(backendOrigin+"/mapboxtoken/e72587d1b2ef43e9b6ec56f693612826",requestOptions);case 7:return tokenResponse=_context9.sent,_context9.next=10,tokenResponse.json();case 10:return mapboxToken=_context9.sent,mapboxgl.accessToken=mapboxToken.data,_context9.prev=12,_context9.next=15,uloc.requestLocation();case 15:_context9.next=19;break;case 17:_context9.prev=17,_context9.t0=_context9.catch(12);case 19:return map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:uloc.point,zoom:4}),_context9.next=22,fetch(backendOrigin+"/camps/cluster",requestOptions);case 22:return response=_context9.sent,_context9.next=25,response.json();case 25:return cluster=_context9.sent,map.on("load",_asyncToGenerator(_regeneratorRuntime().mark((function _callee7(){return _regeneratorRuntime().wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:map.addSource("kampyerleri",{type:"geojson",data:cluster.data,cluster:!0,clusterMaxZoom:8,clusterRadius:50}),map.setLayoutProperty("country-label","text-field",["get","name_tr"]),map.addLayer({id:"clusters",type:"circle",source:"kampyerleri",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",25,"#f1f075",50,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),map.addLayer({id:"cluster-count",type:"symbol",source:"kampyerleri",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),map.addLayer({id:"unclustered-point",type:"circle",source:"kampyerleri",filter:["!",["has","point_count"]],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}});case 5:case"end":return _context7.stop()}}),_callee7)})))),map.on("click","clusters",(function(e){var features=map.queryRenderedFeatures(e.point,{layers:["clusters"]}),clusterId=features[0].properties.cluster_id;map.getSource("kampyerleri").getClusterExpansionZoom(clusterId,(function(err,zoom){err||map.easeTo({center:features[0].geometry.coordinates,zoom:zoom})}))})),map.on("click","unclustered-point",function(){var _ref4=_asyncToGenerator(_regeneratorRuntime().mark((function _callee8(e){var coordinates,id,res,data,_data$data,name,_id,place,region,images;return _regeneratorRuntime().wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return coordinates=e.features[0].geometry.coordinates.slice(),id=e.features[0].properties._id,_context8.next=4,fetch(backendOrigin+"/camps/camp/"+id);case 4:return res=_context8.sent,_context8.next=7,res.json();case 7:for(data=_context8.sent,_data$data=data.data,name=_data$data.name,_id=_data$data._id,place=_data$data.place,region=_data$data.region,images=_data$data.images;Math.abs(e.lngLat.lng-coordinates[0])>180;)coordinates[0]+=e.lngLat.lng>coordinates[0]?360:-360;(new mapboxgl.Popup).setLngLat(coordinates).setHTML("<h3>".concat(name,'</h3>\n        <img src="').concat(images[0],'" alt="').concat(name,'" width="100%">\n        <p>').concat(place," / ").concat(region,'</p>\n        <a href="camp.html?id=').concat(_id,'">daha fazla...</a>\n        ')).addTo(map);case 11:case"end":return _context8.stop()}}),_callee8)})));return function(_x8){return _ref4.apply(this,arguments)}}()),map.on("mouseenter","clusters",(function(){map.getCanvas().style.cursor="pointer"})),map.on("mouseleave","clusters",(function(){map.getCanvas().style.cursor=""})),_context9.abrupt("return",map);case 32:case"end":return _context9.stop()}}),_callee9,null,[[12,17]])})))).apply(this,arguments)}var _hook=new WeakSet,Menugator=function(){function Menugator(menuselector,displayClass){var _this3=this;_classCallCheck(this,Menugator),_classPrivateMethodInitSpec(this,_hook),_defineProperty(this,"clickEvent",(function(event){_this3.toggle()})),_defineProperty(this,"hoverEvent",(function(event){"mouseover"===event.type?_this3.isHover=!0:_this3.isHover=!1,_this3.isHover?(_this3.iconElement.classList.remove("bi-x","bi-list"),_this3.isOpen?_this3.iconElement.classList.add("bi-caret-right"):_this3.iconElement.classList.add("bi-caret-left")):(_this3.iconElement.classList.remove("bi-caret-left","bi-caret-right"),_this3.isOpen?_this3.iconElement.classList.add("bi-x"):_this3.iconElement.classList.add("bi-list"))})),this.menuElement=document.querySelector(menuselector),this.buttonElement=document.querySelector(menuselector+" button"),this.iconElement=document.querySelector(menuselector+" button > i"),this.insideMenuElement=document.querySelector(menuselector+" .navnav"),this.isOpen=!1,this.isHover=!1,this.displayClass=displayClass,_classPrivateMethodGet(this,_hook,_hook2).call(this)}return _createClass(Menugator,[{key:"toggle",value:function toggle(){this.isOpen?(this.menuElement.classList.remove(this.displayClass),this.buttonElement.classList.remove("trans"),this.iconElement.classList.remove("bi-x"),this.iconElement.classList.add("bi-list"),this.insideMenuElement.classList.remove("show"),this.isOpen=!1):(this.menuElement.classList.add(this.displayClass),this.buttonElement.classList.add("trans"),this.iconElement.classList.add("bi-x"),this.iconElement.classList.remove("bi-list"),this.insideMenuElement.classList.add("show"),this.isOpen=!0)}}]),Menugator}();function _hook2(){var _this4=this;this.menuElement&&(this.buttonElement.addEventListener("click",this.clickEvent),this.buttonElement.addEventListener("mouseover",this.hoverEvent),this.buttonElement.addEventListener("mouseout",this.hoverEvent),document.querySelectorAll(".navul > li > a").forEach((function(nv){nv.addEventListener("click",(function(){setTimeout((function(){_this4.toggle()}),300)}))})))}var menu=new Menugator(".navholder","shownav"),uloc=new UserLocation,map;showMap().then((function(mp){map=mp}));var fc=new FeaturedCaps(".featured-campgrid");function randomCamp(){var _fc$data$=fc.data[4],_id=_fc$data$._id,images=_fc$data$.images,description=_fc$data$.description,name=_fc$data$.name,placename=_fc$data$.placename,region=_fc$data$.region,rh=document.querySelector(".rh"),ra=document.querySelector(".ra"),rl=document.querySelector(".rl"),rp=document.querySelector(".rp"),rf=document.querySelector(".rf"),ri=document.querySelector(".ri");rh.innerText=name,ra.innerText=placename.replace(", Turkey",""),rl.innerText=region,rp.innerText=description,rf.href="camp.html?id="+_id,ri.src=images[0]}function kamplist(){return _kamplist.apply(this,arguments)}function _kamplist(){return(_kamplist=_asyncToGenerator(_regeneratorRuntime().mark((function _callee10(){var nearme,nFilt,data;return _regeneratorRuntime().wrap((function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(!uloc.isPointGathered){_context10.next=8;break}return _context10.next=3,requestNearMe();case 3:nearme=_context10.sent,createKampList(nFilt=nearme.data.filter((function(_v,i){return i<9})),"Size en yakın ".concat(nFilt.length," kamp alanı görüntüleniyor")),_context10.next=10;break;case 8:createKampList(data=fc.data.slice(0,9),"Lokasyon bilginize ulaşamadığımızdan rastgele 9 kamp bölgesi görünütleniyor","error");case 10:case"end":return _context10.stop()}}),_callee10)})))).apply(this,arguments)}function createKampList(camps,message){var messageType=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",additive=arguments.length>3&&void 0!==arguments[3]&&arguments[3],filterResonseElement=document.querySelector(".kamplistesi > p"),lister=document.querySelector("#list");additive||(lister.innerHTML=""),camps.forEach((function(v){lister.insertAdjacentHTML("beforeend",campCard(v))})),"info"===messageType&&filterResonseElement.classList.remove("error"),"error"===messageType&&filterResonseElement.classList.add("error"),filterResonseElement.innerText=message}function requestNearMe(){return _requestNearMe.apply(this,arguments)}function _requestNearMe(){return(_requestNearMe=_asyncToGenerator(_regeneratorRuntime().mark((function _callee11(){var myHeaders,reqBody,requestOptions,response,data;return _regeneratorRuntime().wrap((function _callee11$(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return(myHeaders=new Headers).append("Accept","*/*"),myHeaders.append("Content-Type","application/json"),myHeaders.append("Accept-Encoding","gzip, deflate, br"),reqBody={distance:5e4,lon:uloc.point[0],lat:uloc.point[1]},requestOptions={method:"POST",headers:myHeaders,redirect:"follow",body:JSON.stringify(reqBody)},_context11.next=8,fetch(backendOrigin+"/camps/nearme",requestOptions);case 8:return response=_context11.sent,_context11.next=11,response.json();case 11:return data=_context11.sent,_context11.abrupt("return",data);case 13:case"end":return _context11.stop()}}),_callee11)})))).apply(this,arguments)}function campCard(data){var k=data,d="";k.distance&&(d='\n      <p class="distance">\n        <i class="bi bi-signpost"></i>\n        <span> '.concat(Math.floor(k.distance/1e3),"km</span>\n      </p>\n    "));var theImage=0===k.images.length?"imgs/dummy.png":k.images[0];return'\n      <div class="card">\n        <img src="'.concat(theImage,'" alt="').concat(k.name,'">\n        <img class="loader" src="imgs/loader.gif" alt="preloader">\n        <div class="card-info">\n          <h4>').concat(k.name,'</h4>\n          <p class="location"><i class="bi bi-geo-alt-fill"></i><span class="rl"></span>').concat(k.region,'</p>\n          <p class="description">').concat(k.description.substring(0,400),'...</p>\n          <a href="camp.html?id=').concat(k._id,'">daha fazla...</a>\n          ').concat(d,"\n        </div>\n      </div>\n    ")}function addBolgeFilteringSelector(){return _addBolgeFilteringSelector.apply(this,arguments)}function _addBolgeFilteringSelector(){return(_addBolgeFilteringSelector=_asyncToGenerator(_regeneratorRuntime().mark((function _callee12(){var response,data,bolgeElement,regionElement,placeElement;return _regeneratorRuntime().wrap((function _callee12$(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return _context12.next=2,fetch(backendOrigin+"/provinances",requestOptions);case 2:return response=_context12.sent,_context12.next=5,response.json();case 5:data=_context12.sent,bolgeElement=document.querySelector("#bolge"),regionElement=document.querySelector("#il"),placeElement=document.querySelector("#ilce"),bolgeElement.innerHTML='<option value="">Seçiniz</option>',data.data.forEach((function(d){bolgeElement.insertAdjacentHTML("beforeend",'<option value="'.concat(d,'">').concat(d,"</option>"))})),resetFilters(),bolgeElement.addEventListener("change",(function(e){selectorUpdater(e.target)})),regionElement.addEventListener("change",(function(e){selectorUpdater(e.target)})),placeElement.addEventListener("change",(function(e){selectorUpdater(e.target)}));case 15:case"end":return _context12.stop()}}),_callee12)})))).apply(this,arguments)}function resetFilters(){var bolgeElement=document.querySelector("#bolge"),ilElement=document.querySelector("#il"),ilceElement=document.querySelector("#ilce"),filterButton=document.querySelector(".clean-filters"),filterButtonItself;document.querySelector(".clean-filters > button").disabled=!0,filterButton.classList.remove("filtered"),ilElement.disabled=!0,ilceElement.disabled=!0,bolgeElement.value="",ilElement.innerHTML='<option value="" default>Seçiniz</option>',ilceElement.innerHTML='<option value="" default>Seçiniz</option>',kamplist()}function selectorUpdater(_x3){return _selectorUpdater.apply(this,arguments)}function _selectorUpdater(){return(_selectorUpdater=_asyncToGenerator(_regeneratorRuntime().mark((function _callee13(targetElement){var provinanceElement,regionElement,placeElement,data,message;return _regeneratorRuntime().wrap((function _callee13$(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return provinanceElement=document.querySelector("#bolge"),regionElement=document.querySelector("#il"),placeElement=document.querySelector("#ilce"),selectorDisabler(),_context13.next=6,filter(provinanceElement.value,regionElement.value,placeElement.value,targetElement);case 6:data=_context13.sent,selectorEnabler(),data&&(message="".concat(provinanceElement.value," ").concat(regionElement.value," ").concat(placeElement.value," için ").concat(data.length," kamp alanı liteleniyor"),createKampList(data,message));case 9:case"end":return _context13.stop()}}),_callee13)})))).apply(this,arguments)}function selectorDisabler(){var provinanceElement=document.querySelector("#bolge"),regionElement=document.querySelector("#il"),placeElement=document.querySelector("#ilce");provinanceElement.disabled=!0,regionElement.disabled=!0,placeElement.disabled=!0}function selectorEnabler(){var provinanceElement=document.querySelector("#bolge"),regionElement=document.querySelector("#il"),placeElement=document.querySelector("#ilce");provinanceElement.options.length>1&&(provinanceElement.disabled=!1),regionElement.options.length>1&&(regionElement.disabled=!1),placeElement.options.length>1&&(placeElement.disabled=!1)}function filter(_x4,_x5,_x6,_x7){return _filter.apply(this,arguments)}function _filter(){return(_filter=_asyncToGenerator(_regeneratorRuntime().mark((function _callee14(provinance,region,place,targetElement){var provinanceElement,regionElement,placeElement,filterButton,filterButtonItself,selectMessage,myHeaders,reqBody,requestOptions,response,data,regions,regionsSelectorData,places,placesSelectoData;return _regeneratorRuntime().wrap((function _callee14$(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:if(provinanceElement=document.querySelector("#bolge"),regionElement=document.querySelector("#il"),placeElement=document.querySelector("#ilce"),filterButton=document.querySelector(".clean-filters"),filterButtonItself=document.querySelector(".clean-filters > button"),selectMessage='<option value="" default>Seçiniz</option>',"bolge"===targetElement.id&&(region="",place="",regionElement.innerHTML=selectMessage,placeElement.innerHTML=selectMessage,selectorDisabler()),"il"===targetElement.id&&(place="",placeElement.innerHTML=selectMessage,selectorDisabler()),""!==provinance||""!==region||""!==place){_context14.next=12;break}return resetFilters(),kamplist(),_context14.abrupt("return");case 12:return(myHeaders=new Headers).append("Accept","*/*"),myHeaders.append("Content-Type","application/json"),myHeaders.append("Accept-Encoding","gzip, deflate, br"),reqBody={region:region,provinance:provinance,place:place},requestOptions={method:"POST",headers:myHeaders,redirect:"follow",body:JSON.stringify(reqBody)},_context14.next=20,fetch(backendOrigin+"/camps/filter",requestOptions);case 20:return response=_context14.sent,_context14.next=23,response.json();case 23:if((data=_context14.sent).success){_context14.next=30;break}return resetFilters(),kamplist(),_context14.abrupt("return");case 30:provinanceElement.selectedIndex>0&&(filterButton.classList.add("filtered"),filterButtonItself.disabled=!1),""!==provinance&&""===region&&(regions=data.data.map((function(d){return d.region})),regionsSelectorData=Array.from(new Set(regions)).sort().filter((function(v){return null!=v})),regionElement.innerHTML=selectMessage,regionsSelectorData.forEach((function(d){regionElement.insertAdjacentHTML("beforeend",'<option value="'.concat(d,'">').concat(d,"</option>"))}))),""!==region&&""===place&&(places=data.data.map((function(d){return d.place})),placesSelectoData=Array.from(new Set(places)).sort().filter((function(v){return null!=v})),placeElement.innerHTML=selectMessage,placesSelectoData.forEach((function(d){placeElement.insertAdjacentHTML("beforeend",'<option value="'.concat(d,'">').concat(d,"</option>"))})));case 33:return _context14.abrupt("return",data.data);case 34:case"end":return _context14.stop()}}),_callee14)})))).apply(this,arguments)}fc.featuredCampCreator().then(function(){var _ref2=_asyncToGenerator(_regeneratorRuntime().mark((function _callee6(o){return _regeneratorRuntime().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.prev=0,_context6.next=3,uloc.requestLocation();case 3:_context6.next=7;break;case 5:_context6.prev=5,_context6.t0=_context6.catch(0);case 7:o.displayFeatured(),randomCamp(),kamplist(),addBolgeFilteringSelector();case 11:case"end":return _context6.stop()}}),_callee6,null,[[0,5]])})));return function(_x2){return _ref2.apply(this,arguments)}}()),document.querySelector(".clean-filters > button").addEventListener("click",(function(){resetFilters()}));